(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{987:function(e,t,r){"use strict";r.r(t);var n=r(10),o=(r(104),r(130),r(246),r(73),r(959)),l=r(947),c=r(948),_=r(244),v=r(949),d={computed:{loggedIn:function(){return this.$bsc&&this.$bsc.token},maxPage:function(){return Math.ceil(this.userCount/20)}},components:{vueTelegramLogin:o.vueTelegramLogin,ErrorModal:l.default,WeyuFooter:_.default,AccountStatus:c.default,AccountActionBlocks:v.default},data:function(){return{loading:!1,error:null,userCount:null,users:null,user:null,page:1,search:"d"}},watch:{page:function(){this.getUsers()}},created:function(){this.loggedIn?this.getUsers():(this.$bsc.loginModal=!0,this.$router.push({path:"/",query:{redirect:"admin"}}))},methods:{getUser:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.loading=!0,r.prev=1,r.next=4,t.$axios.get("/admin/user/".concat(e));case 4:n=r.sent,t.user=n.data,r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),r.t0.response&&r.t0.response.data?r.t0.response.data.error?t.error=r.t0.response.data.error:t.error=r.t0.response.data:r.t0.message?t.error=r.t0.message:t.error=r.t0;case 11:t.loading=!1;case 12:case"end":return r.stop()}}),r,null,[[1,8]])})))()},getUsers:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.$axios.get("/admin/users?page=".concat(e.page,"&q=").concat(e.search));case 4:r=t.sent,e.users=r.data.users,e.userCount=r.data.count,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),t.t0.response&&t.t0.response.data?t.t0.response.data.error?e.error=t.t0.response.data.error:e.error=t.t0.response.data:t.t0.message?e.error=t.t0.message:e.error=t.t0;case 12:e.loading=!1;case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))()}}},m=r(26),component=Object(m.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"section"},[e.user?r("div",{staticClass:"modal is-active"},[r("div",{staticClass:"modal-background",on:{click:function(t){e.user=null}}}),e._v(" "),r("div",{staticClass:"modal-content"},[r("div",{staticClass:"box has-text-black"},[r("div",{staticClass:"block"},[r("b",[e._v("Address:")]),e._v(" "+e._s(e.user.address))]),e._v(" "),r("div",{staticClass:"block"},[r("b",[e._v("Email:")]),e._v(" "+e._s(e.user.email))]),e._v(" "),r("div",{staticClass:"block"},[r("b",[e._v("Telegram:")]),e._v(" "),e.user.telegram_meta?r("span",[e._v(e._s(e.user.telegram_meta.first_name)),e.user.telegram_meta.username?r("span",[e._v("(@"+e._s(e.user.telegram_meta.username)+")")]):e._e()]):e._e()]),e._v(" "),r("div",{staticClass:"block"},[r("b",[e._v("Tickets:")]),e._v(" "+e._s(e.user.tickets))]),e._v(" "),r("div",{staticClass:"block"},[r("b",[e._v("Created:")]),e._v(" "+e._s(e.user.created_at))]),e._v(" "),r("div",{staticClass:"block"},[r("b",[e._v("Referrals:")]),e._v(" "+e._s(e.user.referrals))]),e._v(" "),r("div",{staticClass:"block"},[r("b",[e._v("Referral Code:")]),e._v(" "+e._s(e.user.referral_code))]),e._v(" "),r("div",{staticClass:"block"},[r("b",[e._v("Referrer:")]),e._v(" "+e._s(e.user.referrer))]),e._v(" "),r("div",{staticClass:"block"},[r("b",[e._v("Tasks:")]),e._v(" "),e._l(e.user.tasks,(function(t){return r("div",{staticClass:"block"},[e._v("\n            - "+e._s(t.key)+": "),r("b",[e._v(e._s(t.answer))]),r("br"),e._v("completed: "+e._s(t.created_at)+"\n          ")])}))],2),e._v(" "),r("div",{staticClass:"block"},[r("b",[e._v("Telegram Meta:")]),e._v(" "+e._s(e.user.telegram_meta))])])]),e._v(" "),r("button",{staticClass:"modal-close is-large",attrs:{"aria-label":"close"},on:{click:function(t){e.user=null}}})]):e._e(),e._v(" "),r("div",{staticClass:"container"},[r("error-modal"),e._v(" "),r("h2",{staticClass:"subtitle"},[e._v("Whitelisted Users")]),e._v(" "),r("div",{staticClass:"field has-addons"},[r("div",{staticClass:"control"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],staticClass:"input",attrs:{type:"text",placeholder:"Search.."},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}})]),e._v(" "),r("div",{staticClass:"control"},[r("a",{staticClass:"button is-info",on:{click:function(t){e.page=1,e.getUsers()}}},[e._v("\n          Search\n        ")])])]),e._v(" "),e.loading?r("div",{staticClass:"has-text-centered subtitle"},[r("progress",{staticClass:"progress is-small is-primary",attrs:{max:"100"}},[e._v("Loading")])]):e._e(),e._v(" "),r("div",{staticClass:"table-container"},[r("table",{staticClass:"table is-fullwidth is-striped is-hoverable"},[e._m(0),e._v(" "),r("tbody",e._l(e.users,(function(t){return r("tr",{key:t.id,on:{click:function(r){return e.getUser(t.id)}}},[r("td",[e._v(e._s(t.address))]),e._v(" "),r("td",[e._v(e._s(t.email))]),e._v(" "),r("td",[t.telegram_meta?r("span",[e._v(e._s(t.telegram_meta.first_name)),t.telegram_meta.username?r("span",[e._v("(@"+e._s(t.telegram_meta.username)+")")]):e._e()]):e._e()]),e._v(" "),r("td",[r("a",{on:{click:function(r){r.preventDefault(),r.stopPropagation(),e.search=t.referrer}}},[e._v(e._s(t.referrer))])]),e._v(" "),r("td",[r("a",{on:{click:function(r){r.preventDefault(),r.stopPropagation(),e.search=t.referral_code}}},[e._v(e._s(t.referral_code))])]),e._v(" "),r("td",[e._v(e._s(t.created_at))])])})),0)])]),e._v(" "),e.userCount&&e.users?r("nav",{staticClass:"pagination",attrs:{role:"navigation","aria-label":"pagination"}},[r("span",[e._v(e._s(20*(e.page-1)+1)+"-"+e._s(20*(e.page-1)+e.users.length)+" of "+e._s(e.userCount))]),e._v(" "),r("a",{staticClass:"pagination-previous",attrs:{disabled:1==e.page}},[e._v("Previous")]),e._v(" "),r("a",{staticClass:"pagination-next",attrs:{disabled:!e.maxPage||e.page==e.maxPage}},[e._v("Next page")]),e._v(" "),r("ul",{staticClass:"pagination-list"},[e.page>2?r("li",[r("a",{staticClass:"pagination-link",on:{click:function(t){e.page=1}}},[e._v("1")])]):e._e(),e._v(" "),e.page>3?r("li",[r("span",{staticClass:"pagination-ellipsis"},[e._v("…")])]):e._e(),e._v(" "),e.page>1?r("li",[r("a",{staticClass:"pagination-link",on:{click:function(t){e.page=e.page-1}}},[e._v(e._s(e.page-1))])]):e._e(),e._v(" "),r("li",[r("a",{staticClass:"pagination-link is-current",attrs:{"aria-current":"page"}},[e._v(e._s(e.page))])]),e._v(" "),e.page<e.maxPage?r("li",[r("a",{staticClass:"pagination-link",on:{click:function(t){e.page=e.page+1}}},[e._v(e._s(e.page+1))])]):e._e(),e._v(" "),e.maxPage>e.page+2?r("li",[r("span",{staticClass:"pagination-ellipsis"},[e._v("…")])]):e._e(),e._v(" "),e.maxPage>e.page+1?r("li",[r("a",{staticClass:"pagination-link",on:{click:function(t){e.page=e.maxPage}}},[e._v(e._s(e.maxPage))])]):e._e()])]):e._e(),e._v(" "),r("div",{staticClass:"has-text-centered container"},[r("div",{staticClass:"has-text-centered mb-4"},[r("a",{staticClass:"button is-outlined is-danger is-small",staticStyle:{"border-radius":"6px"},on:{click:function(t){return e.$bsc.logout()}}},[e._v("\n          Logout\n        ")])]),e._v(" "),r("weyu-footer")],1)],1)])}),[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",[r("tr",[r("th",[e._v("Address")]),e._v(" "),r("th",[e._v("Email")]),e._v(" "),r("th",[e._v("Telegram")]),e._v(" "),r("th",[e._v("Referrer")]),e._v(" "),r("th",[e._v("Referral Code")]),e._v(" "),r("th",[e._v("Created")])])])}],!1,null,"b391a08e",null);t.default=component.exports;installComponents(component,{ErrorModal:r(947).default})}}]);